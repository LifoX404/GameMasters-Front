<!-- Estado de carga -->
@if (loading) {
  <div class="loading">
    <p>Cargando órdenes...</p>
  </div>
}

<!-- Estado de error -->
@if (error && !loading) {
  <div class="error">
    <p>{{ error }}</p>
    <button (click)="loadOrders()">Reintentar</button>
  </div>
}

<!-- Tabla de órdenes -->
@if (!loading && !error) {
  <div class="table-container">
    <div class="table-wrapper">
      <table>
        <thead>
          <tr>
            <th scope="col">Fecha</th>
            <th scope="col">Total</th>
            <th scope="col">Método Pago</th>
            <th scope="col">Estado Orden</th>
            <th scope="col">Acciones</th>
          </tr>
        </thead>
        <tbody>
          @for (item of ordenes; track item.id) {
            <tr>
              <td>
                <span class="date-badge">{{ item.orderDate| date: 'dd/MM/yyyy' }}</span>
              </td>
              <td>
                <span class="price-badge">S/ {{ item.orderTotal| number: '1.2-2' }}</span>
              </td>
              <td>
                <span class="code-badge">{{ item.paymentMethod }}</span>
              </td>
              <td>
                <span class="status-badge" [ngClass]="{
                  'status-pending': item.orderStatus === 'PENDING',
                  'status-confirmed': item.orderStatus === 'CONFIRMED',
                  'status-processing': item.orderStatus === 'PROCESSING',
                  'status-shipped': item.orderStatus === 'SHIPPED',
                  'status-delivered': item.orderStatus === 'DELIVERED',
                  'status-cancelled': item.orderStatus === 'CANCELED'
                }">
                  {{ item.orderStatus }}
                </span>
              </td>
              <td>
                <div class="action-buttons">
                  <app-detalles [id] = "item.id"></app-detalles>
                  <app-editar></app-editar>
                </div>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
}

<!-- Estado vacío -->
@if (!loading && !error && ordenes.length === 0) {
  <div class="empty">
    <p>No hay órdenes disponibles</p>
  </div>
}